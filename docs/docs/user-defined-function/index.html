<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Hypi Platform Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Hypi Platform Documentation Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120274358-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-120274358-1",{})</script><title data-react-helmet="true">User Defined Functions | Hypi Platform Documentation</title><meta data-react-helmet="true" property="og:url" content="https://docs.hypi.io/docs/user-defined-function"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="User Defined Functions | Hypi Platform Documentation"><meta data-react-helmet="true" name="description" content="User Defined functions provide a lightweight way to implement custom behaviour outside of what Hypi offers. The functions are executed on the same server where the query gets processed."><meta data-react-helmet="true" property="og:description" content="User Defined functions provide a lightweight way to implement custom behaviour outside of what Hypi offers. The functions are executed on the same server where the query gets processed."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.hypi.io/docs/user-defined-function"><link data-react-helmet="true" rel="alternate" href="https://docs.hypi.io/docs/user-defined-function" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.hypi.io/docs/user-defined-function" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.875e3d83.css">
<link rel="preload" href="/assets/js/styles.d920ad44.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.431257fe.js" as="script">
<link rel="preload" href="/assets/js/main.d5b5bd78.js" as="script">
<link rel="preload" href="/assets/js/1.5a896f66.js" as="script">
<link rel="preload" href="/assets/js/2.5af1c423.js" as="script">
<link rel="preload" href="/assets/js/3.095f67c6.js" as="script">
<link rel="preload" href="/assets/js/1be78505.96c88702.js" as="script">
<link rel="preload" href="/assets/js/66.b8a96aa4.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.d35980e3.js" as="script">
<link rel="preload" href="/assets/js/17896441.27424259.js" as="script">
<link rel="preload" href="/assets/js/274a27de.be7844c4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Hypi Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Hypi Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Hypi</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://hypi.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Main website</a></div><div class="navbar__items navbar__items--right"><a href="https://hypi.app" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Register or Login</a><a href="https://github.com/hypi-universe/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Hypi Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Hypi Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Hypi</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://hypi.io" target="_blank" rel="noopener noreferrer" class="menu__link">Main website</a></li><li class="menu__list-item"><a href="https://hypi.app" target="_blank" rel="noopener noreferrer" class="menu__link">Register or Login</a></li><li class="menu__list-item"><a href="https://github.com/hypi-universe/docs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Welcome</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/get-started">Get Started</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">API &amp; References</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisetup">API Set-Up</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/authentication">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/arcql">ArcQL filtering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/magic-hypi-object">Magic Hypi Object</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/crud">CRUD APIs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/create-data">Create Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/update-data">Update Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/read-data">Read Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/delete-data">Delete Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/authorisation">Authorisation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apigateway">API gateway</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/aggregation">Aggregation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maths-api">Maths APIs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/user-defined-function">User Defined Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workflow">Workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/triggers">Triggers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/webhooks">Web Hooks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/serverlessfunction">Serverless Function</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fileupload">File Upload</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rest-apis">RESTful APIs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/oauth2login">OAuth2 Login</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Hypi + Angular</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/hypi-angular">Hypi + Angular</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/graphql">GraphQL</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">GraphQL Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gql-introduction">GraphQL Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gql-queries">GraphQL Queries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gql-mutations">GraphQL Mutations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gql-directives">GraphQL Directives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gql-interfaces">GraphQL Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gql-schema-types">GraphQL Schema and Types</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gql-crud-tutorial">Hypi GraphQL CRUD Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/time-series-aggregations">Timeseries Aggregations with Date Granularity</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Glossary</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/glossary">Glossary</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Get Involved</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/get-involved">Get Involved!</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">User Defined Functions</h1></header><div class="markdown"><p>User Defined functions provide a lightweight way to implement custom behaviour outside of what Hypi offers. The functions are executed on the same server where the query gets processed.</p><p>Currently, you may use two programming language for the user defined functions.</p><ul><li><p>Groovy: The entire Groovy syntax is available on the hypi platform. Groovy is general a general programming language. Adding custom behaviour using Groovy becomes quick, easy and performant.</p></li><li><p>Velocity: The velocity template language is in place to output text. This text may execute dynamic behaviour. E.g., customizing the body of an email, substituting receiverâ€™s name from a variable etc.</p></li></ul><blockquote><p>Letâ€™s check how to implement user defined functions. </p></blockquote><p>We will start with a simple schema as follows: </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Query {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    inlineGroovyFunction(a: String, b: Int, c: Boolean)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        :Json @tan(type:Groovy, inline: &quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        def map = new java.util.LinkedHashMap()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        map.put(&quot;a&quot;, a)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        map.put(&quot;b&quot;, b)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        map.put(&quot;c&quot;, c)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return map</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;&quot;&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    inlineVelocityFunction(a: String, b: Int, c: Boolean):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    String @tan(type:Velocity, inline: &quot;$a,$b,$c&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The schema has two user defined functions. <code>inlineGroovyFunction</code> and <code>inlineVelocityFunction</code> You may define the user defined functions either inline or through a script. <code>@tan</code> directive is used to add the functions. </p><p><code>inlineGroovyFunction</code> function puts value of variables a,b and c in a LinkedHashMap and the map is returned in the form of JSON data. <code>inlineVelocityFunction</code> uses velocity template to return the formatted string output of variables a,b, and c. You may execute the user defined function as any other GraphQL query.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  inlineGroovyFunction(a:&quot;val1&quot;, b:23, c: true)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  inlineVelocityFunction(a:&quot;val1&quot;, b:23, c: true)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Result:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;inlineGroovyFunction&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;a&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;val1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;b&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;c&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;inlineVelocityFunction&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;val1,23,true&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You may pass the variable parameters to the function as well. Just like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">query inlineVelocityFunction($a: String, $b: Int, $c: Boolean){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  inlineVelocityFunction(a: $a, b: $b, c: $c)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>As you can see in <code>inlineGroovyFunction</code>, Java classes are also available to use inline. You may also use a simple Groovy like version as follows.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">inlineGroovyFunction(a: String, b: Int, c: Boolean):Json @tan(type:Groovy, inline: &quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     return [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     a: a,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     b: b,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     c: c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;&quot;&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="function-gql"></a>Function â€˜gqlâ€™<a class="hash-link" href="#function-gql" title="Direct link to heading">#</a></h3><p>The function &#x27;gql&#x27; is available to execute inside the user defined function. Using this function you may perform mutation or query operations inside the user defined function. The result depends upon the type of operation. If you perform an <code>upsert</code> mutation, it will return id, createdBy etc. (Just like the normal <code>upsert</code>in Hypi) If you perform a <code>find</code> query, it will return a list.</p><p>Letâ€™s check a few examples of how to use this function. Add the following schema in GraphQL.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Mutation {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  SetBookInfo(a: String, b: Float, c: Int):Json @tan(type:Groovy, inline: &quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return [ gql(\&quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    mutation {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        upsert(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            values: { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Book: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        title: &quot;$a&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        price: $b,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        authorid: $c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ] </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }\&quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;&quot;&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Query {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  GetAuthorInfo(a: String):Json @tan(type:Groovy, inline: &quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return [ gql(\&quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    query {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           get(type: Author, id: &quot;$a&quot;){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ... on Author {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            hypi{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                id               </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            booklist{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                title               </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                price</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                authorid </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }\&quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;&quot;&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}                                                         </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>SetBookInfo</code> is a user defined function to set parameter values inside the table <code>Book</code>. Upon successful creation of the object, the <code>hypi.id</code> is returned.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mutation {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  SetBookInfo(a:&quot;Ikigai&quot;, b:6.99, c: 7)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Result:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;data&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;SetBookInfo&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;data&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;upsert&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              &quot;id&quot;: &quot;01F1F23WERW6V4JQYDRW4QQRBQ&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Let&#x27;s retrieve <code>Author</code> table data using <code>GetAthorInfo</code>. Pass the Author id as <code>Author1</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">query{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  GetAuthorInfo(a:&quot;Author1&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>It returns the author infomation with id &#x27;Author1&#x27;</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;GetAuthorInfo&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;get&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;hypi&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Author1&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Dan Brown&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;booklist&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;title&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Da Vinci Code&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;price&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12.99</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token property">&quot;authorid&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The<code>gql</code>function accepts two parameters.</p><ul><li><code>query</code>: String - the GraphQL query to execute</li><li><code>values</code>: Map - a map containing the set of variables used in<code>query</code></li></ul><p>In the above examples, we have just used GraphQL query string. Let&#x27;s modify the <code>SetBookInfo</code> function with Map values.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Mutation {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  SetBookInfo(a: String, b: Float, c: Int):Json @tan(type:Groovy, inline: &quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return gql(&#x27;&#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    mutation CreateBook($p: String, $q: Float, $r: Int){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        upsert(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            values: { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Book: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        title: $p,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        price: $q,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        authorid: $r</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ] </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }&#x27;&#x27;&#x27;, [&#x27;p&#x27;:a , &#x27;q&#x27;: b, &#x27;r&#x27;: c])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;&quot;&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Notice few changes here:</p><ul><li>Replaced the<code>\&quot;&quot;&quot;</code>with just<code>&#x27;&#x27;&#x27;</code>. Using three<code>&#x27;</code>in Groovy, we have the same effect as<code>&quot;&quot;&quot;</code>. without string interpolation. It means that<code>$a</code>is not evaluated as a Groovy variable and remains as a part of the string.</li><li>Added GraphQL variables<code>CreateBook($p: String, $q: Float, $r: Int)</code></li><li>Added variable values<code>[&#x27;p&#x27;:a, &#x27;q&#x27;: b, &#x27;r&#x27;: c]</code> in the map. Now, the variables<code>$p</code>,<code>$q</code>and<code>$r</code>are GraphQL variables not Groovy variables.</li></ul><p>With these changes, the result is the same as the previous example!</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/hypi-universe/docs/edit/master/content/userdefinedfunctions.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/maths-api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Maths APIs</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/workflow"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Workflow Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#function-gql" class="table-of-contents__link">Function â€˜gqlâ€™</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/get-started/">Get Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/authentication">Authentication</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/arcql">Filtering your data</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/crud">GraphQL CRUD APIs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/rest-apis">REST APIs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://hypi.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support Forum</a></li><li class="footer__item"><a href="https://hypi.app" target="_blank" rel="noopener noreferrer" class="footer__link-item">Platform</a></li><li class="footer__item"><a href="https://hypi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/hypi-universe/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Hypi.</div></div></div></footer></div>
<script src="/assets/js/styles.d920ad44.js"></script>
<script src="/assets/js/runtime~main.431257fe.js"></script>
<script src="/assets/js/main.d5b5bd78.js"></script>
<script src="/assets/js/1.5a896f66.js"></script>
<script src="/assets/js/2.5af1c423.js"></script>
<script src="/assets/js/3.095f67c6.js"></script>
<script src="/assets/js/1be78505.96c88702.js"></script>
<script src="/assets/js/66.b8a96aa4.js"></script>
<script src="/assets/js/935f2afb.d35980e3.js"></script>
<script src="/assets/js/17896441.27424259.js"></script>
<script src="/assets/js/274a27de.be7844c4.js"></script>
</body>
</html>