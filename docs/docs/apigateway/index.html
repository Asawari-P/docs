<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Hypi Platform Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Hypi Platform Documentation Blog Atom Feed"><title data-react-helmet="true">API gateway | Hypi Platform Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="API gateway | Hypi Platform Documentation"><meta data-react-helmet="true" name="description" content="Hypi&#x27;s API gateway acts as a middleware that simplifies the integration of your app with other services."><meta data-react-helmet="true" property="og:description" content="Hypi&#x27;s API gateway acts as a middleware that simplifies the integration of your app with other services."><meta data-react-helmet="true" property="og:url" content="https://docs.hypi.io/docs/apigateway"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.hypi.io/docs/apigateway"><link rel="stylesheet" href="/styles.6c6dae5c.css">
<link rel="preload" href="/styles.c1b2500d.js" as="script">
<link rel="preload" href="/runtime~main.69985961.js" as="script">
<link rel="preload" href="/main.37d6ebf9.js" as="script">
<link rel="preload" href="/1.bf47537d.js" as="script">
<link rel="preload" href="/2.e40aebd0.js" as="script">
<link rel="preload" href="/49.d82d8127.js" as="script">
<link rel="preload" href="/50.09546613.js" as="script">
<link rel="preload" href="/935f2afb.db8addb5.js" as="script">
<link rel="preload" href="/17896441.194492d2.js" as="script">
<link rel="preload" href="/8b79bc85.e8e1dcd8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Hypi Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Hypi Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Hypi</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hypi-universe/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Hypi Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Hypi Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Hypi</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/hypi-universe/docs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">API gateway</h1></header><div class="markdown"><p>Hypi&#x27;s API gateway acts as a middleware that simplifies the integration of your app with other services.</p><p>Importantly, by using the Hypi gateway, you can integrate external services with your Hypi app as if they were a part of the platform.</p><p>Hypi&#x27;s features such as <a href="#">authorisation</a>, <a href="#">workflows</a> etc can all be mixed with gateway functions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="using-the-api-gateway"></a>Using the API gateway<a class="hash-link" href="#using-the-api-gateway" title="Direct link to heading">#</a></h3><p>To use the API gateway, you must add a dependency <code>gateway</code> to the App . As a reminder, a dependency is referenced by the app name, realm and release. Check more about <a href="#">dependencies</a> here. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="http-directive"></a>@http directive<a class="hash-link" href="#http-directive" title="Direct link to heading">#</a></h3><p>Hypi&#x27;s API gateway is centered around a directive, namely<code>@http</code>. To integrate an API you add the directive to a query or mutation function in your app&#x27;s schema.</p><p>Once you have added the directive to a function, it can be treated like any other function in Hypi. Instead of getting its data from the Hypi platform or serverless function, it will get its data from the HTTP service you&#x27;ve configured it to.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="definition-and-parameters"></a>Definition and parameters<a class="hash-link" href="#definition-and-parameters" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">directive @http(  method: HttpMethod! = GET,  url: String!,  headers: String,  requestTemplate: String,  saveAs: String) on FIELD_DEFINITION</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><table><thead><tr><th>Parameter</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>method</td><td>One of the available HTTP methods</td><td>GET, PUT, POST, DELETE, PATCH, OPTIONS, HEAD, TRACE</td></tr><tr><td>url</td><td>The URL template to use to make the request</td><td><a href="https://api.my-domain.com/users/$%7Bsettings.userId%7D?includeAge=$%7Bvars.includeAge%7D" target="_blank" rel="noopener noreferrer">https://api.my-domain.com/users/${settings.userId}?includeAge=${vars.includeAge}</a></td></tr><tr><td>headers</td><td>The string formatted JSON object which sets the headers sent in the HTTP request. A JSON object where ALL entries MUST be strings or convertible to strings (basically numbers) #e.g. {&quot;a&quot;: &quot;v1&quot;, &quot;b&quot;: 2}</td><td>{&quot;Authorization&quot;:&quot;Bearer ${settings.apiToken}&quot;}</td></tr><tr><td>requestTemplate</td><td>The name of the request template which defines how the request body and response should be handled</td><td></td></tr><tr><td>saveAs</td><td>If present, the HTTP response will be stored in Hypi as the given type. The type must exist in the current instance</td><td></td></tr></tbody></table><p>When applied causes the value of the field it is applied to to be resolved using an HTTP query configured with the given parameters</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="variables"></a>Variables<a class="hash-link" href="#variables" title="Direct link to heading">#</a></h3><p>Each argument is a valid Velocity template meaning you can use dynamic parameters. The following may be referenced &quot;vars&quot;, &quot;settings&quot;.</p><ul><li><strong>vars</strong>refers to any arguments on the field the directive is applied to.   <code>${vars.firstName}</code> refers to the firstName argument of the field</li><li><strong>settings</strong>refers to any instance settings provided in the app</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="utilities"></a>Utilities:<a class="hash-link" href="#utilities" title="Direct link to heading">#</a></h3><p>JSON and Map utilities are available for use in all templates.</p><ul><li>JsonNode JSON.parseJSON(String)</li><li>Map&lt;String, Object&gt;; JSON.parse(String)</li></ul><p>Map is the standard Java Map interface containing static util methods e.g. Map.of(...) JsonNode is a class used to represent JSON values by the Jackson JSON library.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example"></a>Example<a class="hash-link" href="#example" title="Direct link to heading">#</a></h3><p>In the Hypi schema editor (or via the API), you may annotate any query or mutation with this directive.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Query {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> getUser(includeAge: Boolean): User @http(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    url: &quot;https://api.my-domain.com/users/${settings.userId} includeAge=${vars.includeAge}&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers: &quot;&quot;&quot;{&quot;Authorization&quot;:&quot;Bearer ${settings.apiToken}&quot;}&quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>You can then call this function via HTTP or GraphQL in your app. Note here that the response from the API must match the structure of the<code>User</code>object you specified as the return type.</p><p>If you&#x27;re making a request to an API which doesn&#x27;t directly match your type i.e.<code>User</code>in this case, you can use the<code>requestTemplate</code>parameter.  It transforms the API response by extracting fields from it and constructs an object which matches your declared return type.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/hypi-universe/docs/edit/master/content/apigateway.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-the-api-gateway" class="table-of-contents__link">Using the API gateway</a></li><li><a href="#http-directive" class="table-of-contents__link">@http directive</a></li><li><a href="#variables" class="table-of-contents__link">Variables</a></li><li><a href="#utilities" class="table-of-contents__link">Utilities:</a></li><li><a href="#example" class="table-of-contents__link">Example</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/authentication/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://hypi.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support Forum</a></li><li class="footer__item"><a href="https://hypi.app" target="_blank" rel="noopener noreferrer" class="footer__link-item">Platform</a></li><li class="footer__item"><a href="https://hypi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/hypi-universe/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Hypi.</div></div></div></footer></div>
<script src="/styles.c1b2500d.js"></script>
<script src="/runtime~main.69985961.js"></script>
<script src="/main.37d6ebf9.js"></script>
<script src="/1.bf47537d.js"></script>
<script src="/2.e40aebd0.js"></script>
<script src="/49.d82d8127.js"></script>
<script src="/50.09546613.js"></script>
<script src="/935f2afb.db8addb5.js"></script>
<script src="/17896441.194492d2.js"></script>
<script src="/8b79bc85.e8e1dcd8.js"></script>
</body>
</html>