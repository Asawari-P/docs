(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{143:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return p})),t.d(n,"metadata",(function(){return s})),t.d(n,"toc",(function(){return c})),t.d(n,"default",(function(){return d}));var a=t(3),r=t(8),i=(t(0),t(182)),o=t(186),l=t(187),p={id:"rest-apis",title:"RESTful APIs",sidebar_label:"RESTful APIs",slug:"/rest-apis"},s={unversionedId:"rest-apis",id:"rest-apis",isDocsHomePage:!1,title:"RESTful APIs",description:"Hypi platform provides APIs with multiple flavors that suit different developers' tastes. The RESTful APIs are no different and at the same time, they were redesigned to abide by the HATEOS code of conduct for better semantics and easier interpretation.",source:"@site/content/rest-apis.md",slug:"/rest-apis",permalink:"/docs/rest-apis",editUrl:"https://github.com/hypi-universe/docs/edit/master/content/rest-apis.md",version:"current",sidebar_label:"RESTful APIs",sidebar:"docs",previous:{title:"File Upload",permalink:"/docs/fileupload"},next:{title:"OAuth2 Login",permalink:"/docs/oauth2login"}},c=[{value:"Authentication",id:"authentication",children:[{value:"GET",id:"get",children:[]},{value:"POST",id:"post",children:[]}]},{value:"CRUD Operations",id:"crud-operations",children:[{value:"Create Data with POST",id:"create-data-with-post",children:[]},{value:"Update data with PUT",id:"update-data-with-put",children:[]},{value:"Read data with GET using an ID",id:"read-data-with-get-using-an-id",children:[]},{value:"Read data with ArcQL Filter",id:"read-data-with-arcql-filter",children:[]},{value:"DELETE Data using an ID",id:"delete-data-using-an-id",children:[]},{value:"DELETE data using ArcQL filter",id:"delete-data-using-arcql-filter",children:[]}]},{value:"GraphQL/ArcQL Functions",id:"graphqlarcql-functions",children:[]}],u={toc:c};function d(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},u,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Hypi platform provides APIs with multiple flavors that suit different developers' tastes. The RESTful APIs are no different and at the same time, they were redesigned to abide by the ",Object(i.b)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/HATEOAS"},"HATEOS")," code of conduct for better semantics and easier interpretation."),Object(i.b)("p",null,"REST APIs conform to the constraints of the ",Object(i.b)("strong",{parentName:"p"},"REST")," architectural style and allows for interaction with RESTful web services. The endpoint  ",Object(i.b)("inlineCode",{parentName:"p"},"https://api.hypi.app/rest")," allows you to use standard REST-like requests to execute queries against your instance."),Object(i.b)("p",null,"Restful APIs include Authentication or CRUD functions like ",Object(i.b)("inlineCode",{parentName:"p"},"login")," ,",Object(i.b)("inlineCode",{parentName:"p"},"upsert"),", ",Object(i.b)("inlineCode",{parentName:"p"},"delete"),",",Object(i.b)("inlineCode",{parentName:"p"},"find")," and ",Object(i.b)("inlineCode",{parentName:"p"},"get"),"."),Object(i.b)("p",null,"There could be multiple ways to execute these functions. It allows Hypi developers to take advantage of the flexibility and tuning the APIs to their awesome applications."),Object(i.b)("p",null,"Let's work with the ",Object(i.b)("inlineCode",{parentName:"p"},"Author")," and ",Object(i.b)("inlineCode",{parentName:"p"},"Book")," schema again to execute Restful APIs."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},"type\xa0Author\xa0{\n    name:\xa0String\n    age:\xa0Int\n    bestbook:\xa0Book\n    booklist:\xa0[Book!]\n}\n\ntype\xa0Book\xa0{\n    title:\xa0String\n    authorid:\xa0Int\n    price:\xa0Float\n}\n")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"Headers for all the RESTful APIs include App Instance Domain as ",Object(i.b)("inlineCode",{parentName:"p"},"hypi-domain")," and  ",Object(i.b)("inlineCode",{parentName:"p"},"application/json")," as ",Object(i.b)("inlineCode",{parentName:"p"},"content-type"),"."),Object(i.b)("p",{parentName:"div"},"For CRUD operations, an authorization header is required with ",Object(i.b)("inlineCode",{parentName:"p"},"Authorization Token")," from the instance."))),Object(i.b)("h2",{id:"authentication"},"Authentication"),Object(i.b)("p",null,"Users can login either by a username or an email. Logins can be triggered either by ",Object(i.b)("inlineCode",{parentName:"p"},"GET")," or ",Object(i.b)("inlineCode",{parentName:"p"},"POST"),". It provides an either/or alternative. You may choose the one that suits your need. The end result would be the same."),Object(i.b)("h3",{id:"get"},"GET"),Object(i.b)("h4",{id:"login-with-username"},"Login with Username"),Object(i.b)("p",null,"The first is the login using the username method. Username and Password are provided in the URL as query parameters."),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"rest/v1/fn/query/login?username=x&password=y&type=query")),Object(i.b)("p",null,"Note: Replace x and y with actual username and password."),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},"$ curl --location --request GET \n    '/rest/v1/fn/query/login?username=x&password=y&type=query' \\\n  --header 'hypi-domain: whipcord.apps.hypi.app' \\\n  --header 'content-type: application/json'\n"))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "login": {\n      "hypi": null,\n      "sessionToken": "eyJhb ...",\n      "sessionExpires": 1598888479,\n      "errorCode": null,\n      "errorMsg": null\n    }\n  }\n}\n')))),Object(i.b)("h4",{id:"login-with-email"},"Login with Email"),Object(i.b)("p",null,"The second is the login using the email method. Email and Password are provided in the URL as query parameters."),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"/rest/v1/fn/query/loginByEmail?email=x&password=y&type=query")),Object(i.b)("p",null,"Replace x and y with actual email and password."),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},"$ curl --location --request GET \n    '/rest/v1/fn/query/loginByEmail?email=x&password=y&type=query' \\\n  --header 'hypi-domain: whipcord.apps.hypi.app' \\\n  --header 'content-type: application/json'\n"))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "loginByEmail": {\n      "hypi": null,\n      "sessionToken": "eyJhb ...",\n      "sessionExpires": 1598888597,\n      "errorCode": null,\n      "errorMsg": null\n    }\n  }\n}\n')))),Object(i.b)("h3",{id:"post"},"POST"),Object(i.b)("p",null,"Authentication can also be performed using the POST method."),Object(i.b)("h4",{id:"login-with-username-1"},"Login with Username"),Object(i.b)("p",null,"The first is the login using the username method. The username and password are provided as input data."),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},"$ curl --location --request POST '/rest/v1/login' \\\n  --header 'hypi-domain: whipcord.apps.hypi.app' \\\n  --header 'content-type: application/json' \\\n  --data-raw '{\n      \"username\": \"x\",\n      \"password\": \"y\"\n  }'\n"))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "login": {\n      "hypi": null,\n      "sessionToken": "eyJhb ...",\n      "sessionExpires": 1598888836,\n      "errorCode": null,\n      "errorMsg": null\n    }\n  }\n}\n')))),Object(i.b)("h4",{id:"login-with-email-1"},"Login with Email"),Object(i.b)("p",null,"The second is again the login using the email method."),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},"$ curl --location --request POST '/rest/v1/login' \\\n    --header 'hypi-domain: whipcord.apps.hypi.app' \\\n  --header 'content-type: application/json' \\\n  --data-raw '{\n      \"email\": \"x\",\n      \"password\": \"y\"\n  }'\n"))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "loginByEmail": {\n      "hypi": null,\n      "sessionToken": "eyJhb ...",\n      "sessionExpires": 1598888914,\n      "errorCode": null,\n      "errorMsg": null\n    }\n  }\n}\n')))),Object(i.b)("h2",{id:"crud-operations"},"CRUD Operations"),Object(i.b)("p",null,"The four basic CRUD operations ",Object(i.b)("strong",{parentName:"p"},"C"),"reate, ",Object(i.b)("strong",{parentName:"p"},"R"),"ead, ",Object(i.b)("strong",{parentName:"p"},"U"),"pdate, and ",Object(i.b)("strong",{parentName:"p"},"D"),"elete can be performed using the semantics of ",Object(i.b)("strong",{parentName:"p"},"P"),"ost, ",Object(i.b)("strong",{parentName:"p"},"G"),"et, ",Object(i.b)("strong",{parentName:"p"},"P"),"ut, and ",Object(i.b)("strong",{parentName:"p"},"D"),"elete HTTP methods. "),Object(i.b)("p",null,"The main REST APIs endpoint is ",Object(i.b)("inlineCode",{parentName:"p"},"https://api.hypi.app/rest/v1")),Object(i.b)("p",null,"The APIs endpoint can be mapped to resources using the /{aggregate} or /{aggregate}/{identifier} for both GET and DELETE methods.  ",Object(i.b)("inlineCode",{parentName:"p"},"{aggregate}")," is the GraphQL type name from your app's schema and ",Object(i.b)("inlineCode",{parentName:"p"},"{identifier}")," is the ID of the object of the GraphQL type."),Object(i.b)("p",null,"E.g. ",Object(i.b)("inlineCode",{parentName:"p"},"https://api.hypi.app/Author/Author1")),Object(i.b)("p",null,"POST and PUT will capture the identifiers from the GraphQL request body to avoid redundancy. "),Object(i.b)("p",null,"The RESTful APIs explained herein allow the same functionality as the CRUD operations explained under ",Object(i.b)("a",{parentName:"p",href:"/docs/crud"},"Hypi Platform CRUD Documentation")),Object(i.b)("h3",{id:"create-data-with-post"},"Create Data with POST"),Object(i.b)("p",null,"To create a resource, send a POST request to the ",Object(i.b)("inlineCode",{parentName:"p"},"/rest/v1")," endpoint with the body containing the resource signature as defined by the GraphQL types. The body (--data-raw) contains the data to be inserted in the Author table. The format of the input data is the same as normal ",Object(i.b)("a",{parentName:"p",href:"/docs/create-data"},"Create")," operation."),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},'$ curl --location --request POST \'/rest/v1\' \\\n  --header \'authorization: eyJhb ...\' \\\n  --header \'hypi-domain: whipcord.apps.hypi.app\' \\\n  --header \'content-type: application/json\' \\\n  --data-raw \'{\n        "values": {\n        "Author": [\n          {\n            "hypi": {"id": "Author1"},\n            "name": "Dan Brown",\n            "age": 56,\n            "booklist":[\n              {\n                "hypi": {"id": "Author1Book1"},\n                "title": "Da Vinci Code",\n                "price": 12.99,\n                "authorid": 1\n              },\n              {\n                "hypi": {"id": "Author1Book2"},\n                "title": "The Last Symbol",\n                "price": 10,\n                "authorid": 1\n              }\n            ] \n          },\n          {\n            "hypi": {"id": "Author2"},\n            "name": "Paulo Coelho",\n            "age": 70,\n            "booklist":[\n              {\n                "hypi": {"id": "Author2Book1"},\n                "title": "Alchemist",\n                "price": 5.99,\n                 "authorid": 2\n              }\n\n            ] \n          }     \n        ]\n      }\n    }  \n  }\'\n'))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n    "data": {\n        "upsert": [\n            {\n                "__typename": "Hypi",\n                "id": "Author1",\n                "impl": null,\n                "created": "2021-04-15T04:04:06Z",\n                "updated": "2021-04-15T04:04:06Z",\n                "trashed": null,\n                "createdBy": "01F2GA50NFXHMYCBDNYFJK1V7R",\n                "instanceId": "01F3826NNRNXSDPVBMTMD47SCK"\n            },\n            {\n                "__typename": "Hypi",\n                "id": "Author2",\n                "impl": null,\n                "created": "2021-04-15T04:04:06Z",\n                "updated": "2021-04-15T04:04:06Z",\n                "trashed": null,\n                "createdBy": "01F2GA50NFXHMYCBDNYFJK1V7R",\n                "instanceId": "01F3826NNRNXSDPVBMTMD47SCK"\n            }\n        ]\n    }\n} \n')))),Object(i.b)("h3",{id:"update-data-with-put"},"Update data with PUT"),Object(i.b)("p",null,"To make an ",Object(i.b)("a",{parentName:"p",href:"/docs/update-data"},"update request"),", the same endpoint and the payload can be used.  However, the HTTP method should be ",Object(i.b)("inlineCode",{parentName:"p"},"PUT"),". "),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},'$ curl --location --request PUT \'/rest/v1\' \\\n  --header \'authorization: eyJhb ...\' \\\n  --header \'hypi-domain: whipcord.apps.hypi.app\' \\\n  --header \'content-type: application/json\' \\\n  --data-raw \'{\n     {\n      "values": {\n        "Author": [\n          {\n            "hypi": {"id": "Author3"},\n            "name": "Sudha Murti",\n            "age": 70,\n            "booklist":[\n              {\n                "hypi": {"id": "Author3Book1"},\n                "title": "Wise and Otherwise",\n                "price": 3.99,\n                "authorid": 3\n              },\n              {\n                "hypi": {"id": "Author3Book2"},\n                "title": "How I taught my GrandMother to Read",\n                "price": 2.99,\n                "authorid": 3\n              }\n            ] \n          }\n\n        ]\n      }\n    }    \n  }\'\n'))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n    "data": {\n        "upsert": [\n            {\n                "__typename": "Hypi",\n                "id": "Author3",\n                "impl": null,\n                "created": "2021-04-15T04:11:57Z",\n                "updated": "2021-04-15T04:11:57Z",\n                "trashed": null,\n                "createdBy": "01F2GA50NFXHMYCBDNYFJK1V7R",\n                "instanceId": "01F3826NNRNXSDPVBMTMD47SCK"\n            }\n        ]\n    }\n}\n')))),Object(i.b)("h3",{id:"read-data-with-get-using-an-id"},"Read data with GET using an ID"),Object(i.b)("p",null,"In order to access a resource with a particular hypi ID, the endpoint  ",Object(i.b)("inlineCode",{parentName:"p"},"/rest/v1")," is appended with ",Object(i.b)("inlineCode",{parentName:"p"},"{aggregate}/{identifier}"),"  where  ",Object(i.b)("inlineCode",{parentName:"p"},"{aggregate}")," is the GraphQL type name from your app's schema and ",Object(i.b)("inlineCode",{parentName:"p"},"{identifier}")," is the ID of the object to get. HTTP method should be GET."),Object(i.b)("p",null,"E.g. GET /rest/v1/Author/Author3. "),Object(i.b)("p",null,"This will ",Object(i.b)("a",{parentName:"p",href:"/docs/read-data"},"retrieve the data")," from Author3 object. "),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},"$ curl --location --request GET '/rest/v1/Author/Author3' \\\n  --header 'authorization: eyJhb ...' \\\n  --header 'hypi-domain: whipcord.apps.hypi.app' \\\n  --header 'content-type: application/json'\n"))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n    "data": {\n             "hypi": {\n                "__typename": "Hypi",\n                "id": "Author3",\n                "impl": null,\n                "created": "2021-04-15T04:11:57Z",\n                "updated": "2021-04-15T04:11:57Z",\n                "trashed": null,\n                "createdBy": "01F2GA50NFXHMYCBDNYFJK1V7R",\n                "instanceId": "01F3826NNRNXSDPVBMTMD47SCK"\n            },\n            "name": "Sudha Murti",\n            "age": 70,\n            "bestbook": null,\n            "booklist": [\n                {\n                    "__typename": "Book",\n                    "hypi": {\n                        "__typename": "Hypi",\n                        "id": "Author3Book1",\n                        "impl": null,\n                        "created": "2021-04-15T04:11:57Z",\n                        "updated": "2021-04-15T04:11:57Z",\n                        "trashed": null,\n                        "createdBy": "01F2GA50NFXHMYCBDNYFJK1V7R",\n                        "instanceId": "01F3826NNRNXSDPVBMTMD47SCK"\n                    },\n                    "title": "Wise and Otherwise",\n                    "authorid": 3,\n                    "price": 3.99\n                },\n                {\n                    "__typename": "Book",\n                    "hypi": {\n                        "__typename": "Hypi",\n                        "id": "Author3Book2",\n                        "impl": null,\n                        "created": "2021-04-15T04:11:57Z",\n                        "updated": "2021-04-15T04:11:57Z",\n                        "trashed": null,\n                        "createdBy": "01F2GA50NFXHMYCBDNYFJK1V7R",\n                        "instanceId": "01F3826NNRNXSDPVBMTMD47SCK"\n                    },\n                    "title": "How I taught my GrandMother to Read",\n                    "authorid": 3,\n                    "price": 2.99\n                }\n            ]\n        }\n    }\n}\n')))),Object(i.b)("h3",{id:"read-data-with-arcql-filter"},"Read data with ArcQL Filter"),Object(i.b)("p",null,"GraphQL ",Object(i.b)("inlineCode",{parentName:"p"},"find")," method can be used to access a resource. Append the endpoint /rest/v1 with {aggregate} and pass on the arcql statement as query parameter."),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"The ArcQL parameter accepts any valid filter supported by ",Object(i.b)("a",{parentName:"p",href:"/docs/arcql"},"ArcQL"),". "))),Object(i.b)("p",null,"In the below example, ",Object(i.b)("inlineCode",{parentName:"p"},"arcql=title='Wise and Otherwise")," is an arcql filter to retrieve the details of a book with the title ",Object(i.b)("inlineCode",{parentName:"p"},"Wise and Otherwise"),"."),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},"$ curl --location \n  --request GET \"/rest/v1/Book?arcql=title='Wise and Otherwise'\" \\\n  --header 'authorization: eyJhb ...' \\\n  --header 'hypi-domain: whipcord.apps.hypi.app' \\\n  --header 'content-type: application/json'\n"))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n    "data": {\n        "find": {\n            "edges": [\n                {\n                    "cursor": "Author3Book1",\n                    "node": {\n                        "__typename": "Book",\n                        "hypi": {\n                            "__typename": "Hypi",\n                            "id": "Author3Book1",\n                            "impl": null,\n                            "created": "2021-04-15T04:11:57Z",\n                            "updated": "2021-04-15T04:11:57Z",\n                            "trashed": null,\n                            "createdBy": "01F2GA50NFXHMYCBDNYFJK1V7R",\n                            "instanceId": "01F3826NNRNXSDPVBMTMD47SCK"\n                        },\n                        "title": "Wise and Otherwise",\n                        "authorid": 3,\n                        "price": 3.99\n                    }\n                }\n            ],\n            "pageInfo": {\n                "hasPreviousPage": false,\n                "hasNextPage": false,\n                "startCursor": "FIRST",\n                "endCursor": "LAST",\n                "pageLimit": 25,\n                "previousOffsets": [],\n                "nextOffsets": []\n            }\n        }\n    }\n}\n')))),Object(i.b)("h3",{id:"delete-data-using-an-id"},"DELETE Data using an ID"),Object(i.b)("p",null,"In order to delete a resource, enter {aggregate}/{identifier} as explained earlier. HTTP method should be DELETE."),Object(i.b)("p",null,"As Author and Book tables are linked with one-to-many references, you will not be able to delete data without unlinking the references. Hence, pass on ",Object(i.b)("inlineCode",{parentName:"p"},"clearArrayReferences=true")," in the query parameter. "),Object(i.b)("p",null,"Check more about Delete function ",Object(i.b)("a",{parentName:"p",href:"/docs/delete-data"},"here"),"."),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},"$ curl --location \n  --request DELETE '/rest/v1/Author/Author1?clearArrayReferences=true' \\\n  --header 'authorization: eyJhb ...' \\\n  --header 'hypi-domain: whipcord.apps.hypi.app' \\\n  --header 'content-type: application/json'\n"))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "delete": 1\n  }\n}\n')))),Object(i.b)("h3",{id:"delete-data-using-arcql-filter"},"DELETE data using ArcQL filter"),Object(i.b)("p",null,"Delete functionality can also be implemeted using ArcQL filter. The arcql query is passed as a query parameter. (",Object(i.b)("inlineCode",{parentName:"p"},"arcql=hypi.id='Author2Book1'"),") .  "),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},"$ curl --location --request DELETE \n  \"/rest/v1/Book?clearArrayReferences=true&arcql=hypi.id='Author2Book1'\" \\\n  --header 'authorization: eyJhb ...' \\\n  --header 'hypi-domain: whipcord.apps.hypi.app' \\\n  --header 'content-type: application/json'\n"))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "delete": 1\n  }\n}\n')))),Object(i.b)("h2",{id:"graphqlarcql-functions"},"GraphQL/ArcQL Functions"),Object(i.b)("p",null,"Any arbitrary GraphQL function like ",Object(i.b)("inlineCode",{parentName:"p"},"upsert"),", ",Object(i.b)("inlineCode",{parentName:"p"},"find"),", or ",Object(i.b)("inlineCode",{parentName:"p"},"delete")," can be triggered using the following endpoint."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Endpoints: ",Object(i.b)("inlineCode",{parentName:"li"},"/rest/v1/fn/{root}/{fn}")),Object(i.b)("li",{parentName:"ul"},"Replace {root} with either of ",Object(i.b)("inlineCode",{parentName:"li"},"query")," or ",Object(i.b)("inlineCode",{parentName:"li"},"mutation")),Object(i.b)("li",{parentName:"ul"},"Replace {fn} with any GraphQL function such as get, find, login, or your own GraphQL function that you defined in your app's schema.")),Object(i.b)("h4",{id:"create-data"},"Create Data"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"POST")," can be used to create resources on the server. This is equivalent to calling the Hypi ",Object(i.b)("inlineCode",{parentName:"p"},"upsert")," function in GraphQL. Use the endpoint ",Object(i.b)("inlineCode",{parentName:"p"},"/rest/v1/fn/mutation/upsert")," to create an object."),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},'$ curl --location --request POST \'/rest/v1/fn/mutation/upsert\' \\\n  --header \'authorization: eyJhb ...\' \\\n  --header \'hypi-domain: whipcord.apps.hypi.app\' \\\n  --header \'content-type: application/json\' \\\n  --data-raw \'{\n     {\n      "values": {\n        "Author": [\n          {\n            "hypi": {"id": "Author4"},\n            "name": "P G Wodehouse"\n          }       \n        ]\n      }\n    }   \n  }\'\n'))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n    "data": {\n        "upsert": [\n            {\n                "__typename": "Hypi",\n                "id": "Author4",\n                "impl": null,\n                "created": "2021-04-15T05:13:27Z",\n                "updated": "2021-04-15T05:13:27Z",\n                "trashed": null,\n                "createdBy": "01F2GA50NFXHMYCBDNYFJK1V7R",\n                "instanceId": "01F3826NNRNXSDPVBMTMD47SCK"\n            }\n        ]\n    }\n}\n')))),Object(i.b)("h4",{id:"update-data"},"Update Data"),Object(i.b)("p",null,"Similar to ",Object(i.b)("inlineCode",{parentName:"p"},"POST"),",",Object(i.b)("inlineCode",{parentName:"p"},"PUT")," is used to update/modify existing resources. It is the same thing with the ",Object(i.b)("inlineCode",{parentName:"p"},"upsert")," function that is also used to modify the resource. Hence, the endpoint remains the same."),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"/rest/v1/fn/mutation/upsert")),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},'$ curl --location --request PUT \'/rest/v1/fn/mutation/upsert\' \\\n  --header \'authorization: eyJhb ...\' \\\n  --header \'hypi-domain: latest.store.hypi.hypi.hypi.app\' \\\n  --header \'content-type: application/json\' \\\n  --data-raw \'{\n      {\n          "values": {\n            "Author": [\n              {\n                "hypi": {"id": "Author5"},\n                "name": "Enid Blyton"\n\n              }       \n            ]\n          }\n       }\n   }\'\n'))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n    "data": {\n        "upsert": [\n            {\n                "__typename": "Hypi",\n                "id": "Author5",\n                "impl": null,\n                "created": "2021-04-15T05:14:48Z",\n                "updated": "2021-04-15T05:14:48Z",\n                "trashed": null,\n                "createdBy": "01F2GA50NFXHMYCBDNYFJK1V7R",\n                "instanceId": "01F3826NNRNXSDPVBMTMD47SCK"\n            }\n        ]\n    }\n}\n')))),Object(i.b)("h4",{id:"read-data"},"Read Data"),Object(i.b)("p",null,"The ",Object(i.b)("strong",{parentName:"p"},"R"),"ead requests discussed above can be rephrased as arbitrary GraphQL functions by using ",Object(i.b)("inlineCode",{parentName:"p"},"query/get")," or ",Object(i.b)("inlineCode",{parentName:"p"},"query/find"),"."),Object(i.b)("h5",{id:"find"},"Find"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"GET")," , ",Object(i.b)("inlineCode",{parentName:"p"},"PUT")," , ",Object(i.b)("inlineCode",{parentName:"p"},"POST"),", and ",Object(i.b)("inlineCode",{parentName:"p"},"DELETE")," methods above are all semantics to make the API more familiar and inline with existing common practice.  Data can be retrieved using the the ",Object(i.b)("inlineCode",{parentName:"p"},"find")," function passing the ",Object(i.b)("inlineCode",{parentName:"p"},"aggregate")," to the ",Object(i.b)("inlineCode",{parentName:"p"},"type")," query parameter.  An arcql query can also be appended to it. Two query parameters can be separated using '&'. "),Object(i.b)("p",null,"E.g. ",Object(i.b)("inlineCode",{parentName:"p"},"/rest/v1/fn/query/find?type=Author&arcql=hypi.id='Author5'")),Object(i.b)("p",null,"Unlike the ",Object(i.b)("inlineCode",{parentName:"p"},"GET")," function, this returns a list of objects matching the filter provided."),Object(i.b)(o.a,{defaultValue:"query",values:[{label:"Request",value:"query"},{label:"Response",value:"response"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"query",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-java"},"$ curl --location \n  --request GET \"/rest/v1/fn/query/find?type=Author&arcql=hypi.id='Author5'\" \\\n  --header 'authorization: eyJhb ...' \\\n  --header 'hypi-domain: latest.store.hypi.hypi.hypi.app' \\\n  --header 'content-type: application/json'\n"))),Object(i.b)(l.a,{value:"response",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n    "data": {\n        "find": {\n            "edges": [\n                {\n                    "cursor": "Author5",\n                    "node": {\n                        "__typename": "Author",\n                        "hypi": {\n                            "__typename": "Hypi",\n                            "id": "Author5",\n                            "impl": null,\n                            "created": "2021-04-15T05:14:48Z",\n                            "updated": "2021-04-15T05:14:48Z",\n                            "trashed": null,\n                            "createdBy": "01F2GA50NFXHMYCBDNYFJK1V7R",\n                            "instanceId": "01F3826NNRNXSDPVBMTMD47SCK"\n                        },\n                        "name": "Enid Blyton",\n                        "age": null,\n                        "bestbook": null,\n                        "booklist": null\n                    }\n                }\n            ],\n            "pageInfo": {\n                "hasPreviousPage": false,\n                "hasNextPage": false,\n                "startCursor": "FIRST",\n                "endCursor": "LAST",\n                "pageLimit": 25,\n                "previousOffsets": [],\n                "nextOffsets": []\n            }\n        }\n    }\n}    \n')))),Object(i.b)("hr",null),Object(i.b)("p",null,"Above sample examples of RESTful APIs can be tested with Postman. Do check out hypi collection of above examples by clicking button below. "),Object(i.b)("p",null,"Note:  You need to provide actual instance domain name and authorization token to run the queries in Postman. "),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://god.gw.postman.com/run-collection/15379828-1ebf55dd-f582-4b03-a10d-4dd70e3f6898?action=collection%2Ffork&collection-url=entityId%3D15379828-1ebf55dd-f582-4b03-a10d-4dd70e3f6898%26entityType%3Dcollection%26workspaceId%3Da1cfb46b-0624-4367-8c08-d41c6cf700f0"},Object(i.b)("img",{parentName:"a",src:"https://run.pstmn.io/button.svg",alt:"Run in Postman"}))))}d.isMDXComponent=!0},182:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return h}));var a=t(0),r=t.n(a);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=r.a.createContext({}),c=function(e){var n=r.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=c(e.components);return r.a.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},b=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=c(t),b=a,h=u["".concat(o,".").concat(b)]||u[b]||d[b]||i;return t?r.a.createElement(h,l(l({ref:n},s),{},{components:t})):r.a.createElement(h,l({ref:n},s))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=b;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"},183:function(e,n,t){"use strict";function a(e){var n,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=a(e[n]))&&(r&&(r+=" "),r+=t);else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}n.a=function(){for(var e,n,t=0,r="";t<arguments.length;)(e=arguments[t++])&&(n=a(e))&&(r&&(r+=" "),r+=n);return r}},184:function(e,n,t){"use strict";var a=t(0),r=t(185);n.a=function(){var e=Object(a.useContext)(r.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},185:function(e,n,t){"use strict";var a=t(0),r=Object(a.createContext)(void 0);n.a=r},186:function(e,n,t){"use strict";var a=t(0),r=t.n(a),i=t(184),o=t(183),l=t(57),p=t.n(l);var s=37,c=39;n.a=function(e){var n=e.lazy,t=e.block,l=e.defaultValue,u=e.values,d=e.groupId,b=e.className,h=Object(i.a)(),m=h.tabGroupChoices,y=h.setTabGroupChoices,j=Object(a.useState)(l),O=j[0],f=j[1],g=a.Children.toArray(e.children),v=[];if(null!=d){var T=m[d];null!=T&&T!==O&&u.some((function(e){return e.value===T}))&&f(T)}var N=function(e){var n=e.target,t=v.indexOf(n),a=g[t].props.value;f(a),null!=d&&(y(d,a),setTimeout((function(){var e,t,a,r,i,o,l,s;(e=n.getBoundingClientRect(),t=e.top,a=e.left,r=e.bottom,i=e.right,o=window,l=o.innerHeight,s=o.innerWidth,t>=0&&i<=s&&r<=l&&a>=0)||(n.scrollIntoView({block:"center",behavior:"smooth"}),n.classList.add(p.a.tabItemActive),setTimeout((function(){return n.classList.remove(p.a.tabItemActive)}),2e3))}),150))},w=function(e){var n,t;switch(e.keyCode){case c:var a=v.indexOf(e.target)+1;t=v[a]||v[0];break;case s:var r=v.indexOf(e.target)-1;t=v[r]||v[v.length-1]}null===(n=t)||void 0===n||n.focus()};return r.a.createElement("div",{className:"tabs-container"},r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(o.a)("tabs",{"tabs--block":t},b)},u.map((function(e){var n=e.value,t=e.label;return r.a.createElement("li",{role:"tab",tabIndex:O===n?0:-1,"aria-selected":O===n,className:Object(o.a)("tabs__item",p.a.tabItem,{"tabs__item--active":O===n}),key:n,ref:function(e){return v.push(e)},onKeyDown:w,onFocus:N,onClick:N},t)}))),n?Object(a.cloneElement)(g.filter((function(e){return e.props.value===O}))[0],{className:"margin-vert--md"}):r.a.createElement("div",{className:"margin-vert--md"},g.map((function(e,n){return Object(a.cloneElement)(e,{key:n,hidden:e.props.value!==O})}))))}},187:function(e,n,t){"use strict";var a=t(0),r=t.n(a);n.a=function(e){var n=e.children,t=e.hidden,a=e.className;return r.a.createElement("div",{role:"tabpanel",hidden:t,className:a},n)}}}]);