(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{104:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return c})),a.d(t,"toc",(function(){return b})),a.d(t,"default",(function(){return d}));var n=a(3),r=a(7),l=(a(0),a(119)),o={id:"deletedata",title:"Delete Data",sidebar_label:"Delete Data",slug:"/deletedata"},c={unversionedId:"deletedata",id:"deletedata",isDocsHomePage:!1,title:"Delete Data",description:"The hypi platform supports two types of deletions. The first one is a Soft Delete that does not actually delete data but \u2018marks\u2019 it as deleted. Use the trash function to perform a soft delete. You may reverse the soft delete to restore data.",source:"@site/content/deletedata.md",slug:"/deletedata",permalink:"/docs/deletedata",editUrl:"https://github.com/hypi-universe/docs/edit/master/content/deletedata.md",version:"current",sidebar_label:"Delete Data",sidebar:"docs",previous:{title:"Read Data",permalink:"/docs/read-data"},next:{title:"CRUD APIs",permalink:"/docs/crud"}},b=[{value:"trash",id:"trash",children:[]},{value:"untrash",id:"untrash",children:[]},{value:"delete",id:"delete",children:[]},{value:"deleteScalars",id:"deletescalars",children:[]}],i={toc:b};function d(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},i,a,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"The hypi platform supports two types of deletions. The first one is a ",Object(l.b)("strong",{parentName:"p"},"Soft Delete")," that does not actually delete data but \u2018marks\u2019 it as deleted. Use the ",Object(l.b)("inlineCode",{parentName:"p"},"trash")," function to perform a soft delete. You may reverse the soft delete to restore data."),Object(l.b)("p",null,"The second type of delete is irreversible. The data is permanently deleted from the system and cannot be undone. Use the ",Object(l.b)("inlineCode",{parentName:"p"},"delete")," or ",Object(l.b)("inlineCode",{parentName:"p"},"deleteScalars")," functions to delete data permanently."),Object(l.b)("p",null,"So, there are four functions related to deletion."),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"Let's check them out!")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",{parentName:"li",href:"###trash"},"trash")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",{parentName:"li",href:"#untrash"},"untrash")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",{parentName:"li",href:"#delete"},"delete")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",{parentName:"li",href:"#deletescalars"},"deleteScalars"))),Object(l.b)("hr",null),Object(l.b)("h3",{id:"trash"},"trash"),Object(l.b)("p",null,'In some cases, you want your data to \u2018appear\u2019 deleted. But you may restore it if required. Take an example of an email application. There is often a "recycle" or "trash" folder. By using the\xa0',Object(l.b)("inlineCode",{parentName:"p"},"trash"),"\xa0function, you can put unwanted data in Trash."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"trash(type: HypiMutationType!, arcql: String!): Int!\n")),Object(l.b)("p",null,"The function returns the number of records that were marked as trash."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"mutation {\n  trash(type: Author, \n  arcql: \"hypi.id = '01F0DN278W6NMQFRW4TVRCA52V'\")\n}\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "trash": 1\n  }\n}\n')),Object(l.b)("p",null,"If you use the\xa0\u2018get\u2019\xa0or\xa0\u2018find\u2019\xa0queries now, the result will not display the trashed object by default. You must set the\xa0\u2018includeTrashed\u2019\xa0parameter to\xa0\u2018true\u2019\xa0to get the object."),Object(l.b)("hr",null),Object(l.b)("h3",{id:"untrash"},"untrash"),Object(l.b)("p",null,"The opposite of the\xa0trash\xa0function is\xa0",Object(l.b)("inlineCode",{parentName:"p"},"untrash"),". Use this function to remove the marker from the data that was previously marked as trash."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"untrash(type: HypiMutationType!, arcql: String!): Int!\n")),Object(l.b)("p",null,"The function returns the number of records that were marked untrashed."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"mutation {\n  untrash(\n  type: Author, arcql: \"hypi.id = '01F0DN278W6NMQFRW4TVRCA52V'\")\n}\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "untrash": 1\n  }\n}\n')),Object(l.b)("hr",null),Object(l.b)("h3",{id:"delete"},"delete"),Object(l.b)("p",null,"If you want to delete data permanently, use the\xa0",Object(l.b)("inlineCode",{parentName:"p"},"delete"),"\xa0function."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"delete(type: HypiMutationType!, arcql: String!): Int!\n")),Object(l.b)("p",null,"The function returns the number of records that were marked deleted."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"mutation {\n  delete(type: Author, \n  arcql: \"hypi.id = '01F0DVHM2AZCGM0JSR9QRNBWZY'\")\n}\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "delete": 1\n  }\n}\n')),Object(l.b)("p",null,"You may delete more records using the ArcQL query. Maximum 25 records will be deleted in one request."),Object(l.b)("hr",null),Object(l.b)("h3",{id:"deletescalars"},"deleteScalars"),Object(l.b)("p",null,"Array fields in Hypi are not stored directly with the other scalar fields in an object. This allows you to add an unlimited number of items to an array field. So, if you want to delete data permanently from a scalar array, use the ",Object(l.b)("inlineCode",{parentName:"p"},"deleteScalars")," function."),Object(l.b)("p",null,"If there is an array that references another type, note that deleteScalars will not delete scalar data from that array. \u2018link\u2019 function is used for that purpose."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-java"},"deleteScalars(\ntype:\xa0HypiMutationType!\nfield:\xa0String!\nvalues:\xa0\\[String!\\]!\narcql:\xa0String!\n):\xa0Int!\n")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},Object(l.b)("strong",{parentName:"th"},"Parameter")),Object(l.b)("th",{parentName:"tr",align:null},Object(l.b)("strong",{parentName:"th"},"Description")),Object(l.b)("th",{parentName:"tr",align:null},Object(l.b)("strong",{parentName:"th"},"Example")))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("strong",{parentName:"td"},"type")),Object(l.b)("td",{parentName:"tr",align:null},"The type (table) to delete scalar array values from"),Object(l.b)("td",{parentName:"tr",align:null},"Message, Author")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("strong",{parentName:"td"},"field")),Object(l.b)("td",{parentName:"tr",align:null},"The name of the array field"),Object(l.b)("td",{parentName:"tr",align:null},"Number")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("strong",{parentName:"td"},"values")),Object(l.b)("td",{parentName:"tr",align:null},"The values to be deleted"),Object(l.b)("td",{parentName:"tr",align:null},"[","2,5,6","]")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("strong",{parentName:"td"},"arcql")),Object(l.b)("td",{parentName:"tr",align:null},"The id of the object to delete values from"),Object(l.b)("td",{parentName:"tr",align:null},"arcql: \"hypi.id='01F0FW9XYQWQNNEDYV3S5P2WGQ'\"")))),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"Consider the data type \u2018Question\u2019 which holds question-answer keys for a test.")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-java"},"type Question\xa0{\nhypi:\xa0Hypi\nquestion:\xa0\\[Int!\\]\nanswer:\xa0\\[String!\\]\xa0\xa0\n}\n")),Object(l.b)("p",null," The below example shows the use of the \u2018deleteScalars\u2019 function to delete data from scalar arrays. In the example, from an \u2018ans\u2019 field from Question, string values (\u201cb\u201d and \u201cc\u201d) are deleted. The function returns the number of records affected by the deletion."),Object(l.b)("p",null,"Frame arcql query to select the object and get an id. In the example, hypi id has been hardcoded."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-java"},'mutation{\n  deleteScalars(\n    type:Question,\n    field:"ans",\n    values:["b","c"],\n    arcql:"hypi.id =\'01F0FW9XYQWQNNEDYV3S5P2WGQ\'"\n  )\n}\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "deleteScalars": 2\n  }\n}\n')))}d.isMDXComponent=!0},119:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=r.a.createContext({}),d=function(e){var t=r.a.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},s=function(e){var t=d(e.components);return r.a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},p=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,o=e.parentName,i=b(e,["components","mdxType","originalType","parentName"]),s=d(a),p=n,m=s["".concat(o,".").concat(p)]||s[p]||u[p]||l;return a?r.a.createElement(m,c(c({ref:t},i),{},{components:a})):r.a.createElement(m,c({ref:t},i))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,o=new Array(l);o[0]=p;var c={};for(var b in t)hasOwnProperty.call(t,b)&&(c[b]=t[b]);c.originalType=e,c.mdxType="string"==typeof e?e:n,o[1]=c;for(var i=2;i<l;i++)o[i]=a[i];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}p.displayName="MDXCreateElement"}}]);