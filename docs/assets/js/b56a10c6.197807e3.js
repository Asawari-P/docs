(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{155:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return p})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return s}));var a=n(3),i=n(8),r=(n(0),n(190)),o={id:"hypi-cli-react",title:"Use Hypi in a ReactJS Project",sidebar_label:"ReactJS",slug:"/hypi-cli-react"},p={unversionedId:"hypi-cli-react",id:"hypi-cli-react",isDocsHomePage:!1,title:"Use Hypi in a ReactJS Project",description:"In this guide, we will access Hypi APIs from the React Typescript project using the Hypi CLI.",source:"@site/content/hypi-cli-react.md",slug:"/hypi-cli-react",permalink:"/docs/hypi-cli-react",editUrl:"https://github.com/hypi-universe/docs/edit/master/content/hypi-cli-react.md",version:"current",sidebar_label:"ReactJS",sidebar:"docs",previous:{title:"Use Hypi in a Flutter Project",permalink:"/docs/hypi-cli-flutter"},next:{title:"Use Hypi in an Angular Project",permalink:"/docs/hypi-cli-angular"}},c=[{value:"Create React Typescript App",id:"create-react-typescript-app",children:[]},{value:"Config",id:"config",children:[]},{value:"Login",id:"login",children:[]},{value:"Hypi Init",id:"hypi-init",children:[]},{value:"Schema Edit",id:"schema-edit",children:[]},{value:"Hypi Sync",id:"hypi-sync",children:[]},{value:"Hypi Generate",id:"hypi-generate",children:[]},{value:"Using GraphQL hooks",id:"using-graphql-hooks",children:[]},{value:"Authentication using Apollo Client",id:"authentication-using-apollo-client",children:[]}],l={toc:c};function s(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"In this guide, we will access Hypi APIs from the React Typescript project using the Hypi CLI."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Prerequisites"),": Knowledge of application development using ReactJS. Development set up for ReactJS."),Object(r.b)("h3",{id:"create-react-typescript-app"},"Create React Typescript App"),Object(r.b)("p",null,"You may create a sample React Typescript app using the following command. "),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"npx create-react-app my-app --template typescript`  \n")),Object(r.b)("p",null,"or use an example from ",Object(r.b)("a",{parentName:"p",href:"https://github.com/hypi-universe/hypi-cli-react-example"},"here")," "),Object(r.b)("p",null,"In this example, we will use the apollo client as the graphql client. Add the following dependencies to ",Object(r.b)("inlineCode",{parentName:"p"},"package.json")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},'"@apollo/client": "^3.3.16",\n"graphql": "^15.5.0",\n')),Object(r.b)("p",null,"Let's start using Hypi CLI now."),Object(r.b)("h3",{id:"config"},"Config"),Object(r.b)("p",null,"If you're an on-premise customer, you can use the ",Object(r.b)("inlineCode",{parentName:"p"},"hypi config")," option to set the hostname of your installation. Configure your domain using following command."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"USAGE\n  $ hypi config [API_DOMAIN]\n\nOPTIONS\n  -a, --api_domain=api_domain\n  -h, --help                   show CLI help\n\nEXAMPLES\n  $ hypi config https://api.my-onpremise-domain.com\n  $ hypi config -a=https://api.my-onpremise-domain.com\n  $ hypi config --api_domain=https://api.my-onpremise-domain.com\n")),Object(r.b)("p",null,"Go to your ReactJS project folder on the command line and run ",Object(r.b)("inlineCode",{parentName:"p"},"hypi config")," to set configuration."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},">hypi config https://api.hypi.app\nDone, Please make sure to login again, hypi login and do int and sync your schema\n")),Object(r.b)("h3",{id:"login"},"Login"),Object(r.b)("p",null,"On the command line, go to your ReactJS application folder. Login to your Hypi account using ",Object(r.b)("a",{parentName:"p",href:"/docs/hypi-cli-intro#hypi-login"},"hypi login")," command. After successful login, the user config file will be placed in ",Object(r.b)("inlineCode",{parentName:"p"},"~/.config/hypi/config.json")," . In case of Windows, the file will be created in ",Object(r.b)("inlineCode",{parentName:"p"},"\\Users\\user\\AppData\\Local")),Object(r.b)("p",null,"Here, are the contents of the file. It makes the connection between Hypi and ReactJS app."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},'{\n  "domain": "latest.store.hypi.01f2ga50p2mzkmyqse17gd2bae.hypi.app",\n  "sessionToken": "Auth-Token",\n  "sessionExpires": 1626580838,\n  "api_domain": "https://api.hypi.app"\n}\n')),Object(r.b)("h3",{id:"hypi-init"},"Hypi Init"),Object(r.b)("p",null,"Use the ",Object(r.b)("inlineCode",{parentName:"p"},"hypi init")," command to initialize a new hypi App and Instance in your ReactJS project folder."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"    USAGE\n      $ hypi init [WEBSITE] [NAME] [LABEL] [DOMAIN]\n    \n    OPTIONS\n      -h, --help           show CLI help\n      -i, --have_instance\n    \n    EXAMPLES\n      $ hypi init -i\n      $ hypi init --have_instance\n      $ hypi init\n")),Object(r.b)("p",null,"Go to your ReactJS project folder on the command line and run ",Object(r.b)("inlineCode",{parentName:"p"},"hypi init")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},">hypi init\nThis command will walk you through creating app.yaml and instance.yaml files.\n? Do you have a Hypi instance created at https://hypi.app that you\u2019d like to use? No\n? App name?  ReactJSApp\n? App label?  ReactJSApp\n? Website?  https://hypi.app/apps\n? Domain(Optional)?\nInit done successfully, Now write your schema then run the hypi sync command to generate your app's API\n")),Object(r.b)("p",null,"This creates a  ",Object(r.b)("inlineCode",{parentName:"p"},".hypi")," folder in your ReactJS project folder. Within ",Object(r.b)("inlineCode",{parentName:"p"},".hypi"),", three files are created. ",Object(r.b)("inlineCode",{parentName:"p"},"app.yaml"),", ",Object(r.b)("inlineCode",{parentName:"p"},"instance.yaml")," and ",Object(r.b)("inlineCode",{parentName:"p"},"schema.graphql"),". The files app.yaml and instance.yaml has Hypi ",Object(r.b)("inlineCode",{parentName:"p"},"App and Instance")," details. "),Object(r.b)("div",{className:"admonition admonition-info alert alert--info"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"You should write your schema inside ",Object(r.b)("inlineCode",{parentName:"p"},"schema.graphql")," file."))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"app.yaml\n========\nwebsite: https://hypi.app/apps\nname: ReactJSApp\nlabel: ReactJSApp\nreleases:\n  - name: latest\n    schema:\n      types: schema.graphql\n    status: PUBLISHED\n    notes: latest version\n    hypi:\n      id: 01F8EMYY0935THH0GX40K7QESY\nhypi:\n  id: 01F8EMYY01YDD2HB0WH8E1AZJW\n")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"instance.yaml\n=============\ndomain: engulfs.apps.hypi.app\nrelease:\n  name: latest\n  hypi:\n    id: 01F8EMYY0935THH0GX40K7QESY\nhypi:\n  id: 01F8EMZ1PN1ANAS1C15K6DD63H\n")),Object(r.b)("p",null,"The new app gets created on the Hypi account. If an existing domain is not provided then a new domain also gets created."),Object(r.b)("p",null,"If you want to use an existing domain on the Hypi website instead of creating a new one, you may provide that domain that as well."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"hypi init\n")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"This command will walk you through creating app.yaml and instance.yaml files.\n? Do you have a Hypi instance created at https://hypi.app that you\u2019d like to use? Yes\n? Please enter a valid domain engulfs.apps.hypi.app\nInit done successfully, Now write your schema then run the hypi sync command to generate your app's API\n")),Object(r.b)("p",null,"In this case, the existing schema will get imported. "),Object(r.b)("h3",{id:"schema-edit"},"Schema Edit"),Object(r.b)("p",null,"You may edit the schema in the ",Object(r.b)("inlineCode",{parentName:"p"},"schema.graphql"),"\nLet's edit the schema, to add the data types. Here, we are adding Product data type."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"type Product {\n    hypi: Hypi\n    title: String!\n    description: String!\n    price: Float\n}\n")),Object(r.b)("h3",{id:"hypi-sync"},"Hypi Sync"),Object(r.b)("p",null,"The next step is to sync the edited local schema and get the full schema of Hypi.\nUse the ",Object(r.b)("inlineCode",{parentName:"p"},"hypi sync")," command for that."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"    USAGE\n      $ hypi sync \n    \n    OPTIONS\n      -h, --help  show CLI help\n    \n    EXAMPLE\n      $ hypi sync\n")),Object(r.b)("p",null,"Now run ",Object(r.b)("inlineCode",{parentName:"p"},"hypi sync")," to generate full schema file."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"hypi sync\nApp created with id : 01F8EMYY01YDD2HB0WH8E1AZJW\nInstance created with id : 01F8EMZ1PN1ANAS1C15K6DD63H\nupdateAppYamlFile done\nupdateInstanceYamlFile done\nIntrospection done\nSync Process... done\nThe file was succesfully generated!\n")),Object(r.b)("p",null,"After syncing, ",Object(r.b)("inlineCode",{parentName:"p"},"generated-schema.graphql")," file gets generated in the ",Object(r.b)("inlineCode",{parentName:"p"},".hypi")," folder that has full hypi schema."),Object(r.b)("h3",{id:"hypi-generate"},"Hypi Generate"),Object(r.b)("p",null,"Now, you need to generate graphql ReactJS code to use Hypi APIs within the ReactJS typescript project. "),Object(r.b)("p",null,"Inside ",Object(r.b)("inlineCode",{parentName:"p"},"src/graphql")," folder, add files related to GraphQl queries and mutations."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Here is the sample Product Query file to find all data : ",Object(r.b)("inlineCode",{parentName:"li"},"src/graphql/products.graphql"))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"query products($arcql: String!) {\n    find(type: Product, arcql: $arcql) {\n        edges {\n            node {\n               ...ProductFields\n            }\n        }\n    }\n}\n\nfragment ProductFields on Product {\n   hypi {\n        id\n    }\n    title\n    description\n}    \n")),Object(r.b)("p",null,"You may replace the type ",Object(r.b)("inlineCode",{parentName:"p"},"Product")," with your own data type and fields like ",Object(r.b)("inlineCode",{parentName:"p"},"title/description")," with your own fields."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Now, add Products Mutation: ",Object(r.b)("inlineCode",{parentName:"li"},"src/graphql/products-mutation.graphql"))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"mutation upsert($values:HypiUpsertInputUnion!) {\n  upsert(values:$values)\n    {\n        id\n    }\n}\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"You may also retrieve a single product using ",Object(r.b)("inlineCode",{parentName:"li"},"get")," query. Add ",Object(r.b)("inlineCode",{parentName:"li"},"get")," query:  `src/graphql/get-product.graphql")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"query getProduct($id: String!) {\n    get(type: Product, id: $id) {\n           ...ProductFields\n    }\n}\n\nfragment ProductFields on Product {\n   hypi {\n        id\n    }\n    title\n    description\n}\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Add delete mutation: ",Object(r.b)("inlineCode",{parentName:"li"},"src/graphql/delete-product.graphql"))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"mutation delete(\n$arcql: String!\n$clearArrayReferences: Boolean = false) {\n  delete(type: Product, arcql: $arcql, clearArrayReferences: $clearArrayReferences)\n}\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"After adding the graphql queries and mutations, use the ",Object(r.b)("inlineCode",{parentName:"li"},"generate")," command to generate the Reactjs graphql code so that you can use Hypi APIs within your project.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"USAGE\n  $ hypi generate [PLATFORM]\n\nOPTIONS\n  -h, --help                              show CLI help\n  -p, --platform=flutter|reactjs|angular\n\nEXAMPLES\n  $ hypi generate angular\n  $ hypi generate -p=angular\n  $ hypi generate --platform=angular\n\n")),Object(r.b)("p",null,"After running the command, ",Object(r.b)("inlineCode",{parentName:"p"},"graphql.ts")," files get created in the ",Object(r.b)("inlineCode",{parentName:"p"},"\\src\\generated")," folder. "),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"hypi generate reactjs\nGenerate Process... done\nThe file was succesfully generated!\n")),Object(r.b)("p",null,"Inside ",Object(r.b)("inlineCode",{parentName:"p"},"graphql.ts")," file, you will find hooks for the query and the mutation to be used inside your typescript components."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript"},"export function useProductsQuery(baseOptions: Apollo.QueryHookOptions<ProductsQuery, ProductsQueryVariables>) {\n        const options = {...defaultOptions, ...baseOptions}\n        return Apollo.useQuery<ProductsQuery, ProductsQueryVariables>(ProductsDocument, options);\n        }\n")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript"},"export function useUpsertMutation(baseOptions?: Apollo.MutationHookOptions<UpsertMutation, UpsertMutationVariables>) {\n        const options = {...defaultOptions, ...baseOptions}\n        return Apollo.useMutation<UpsertMutation, UpsertMutationVariables>(UpsertDocument, options);\n      }\n")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript"},"export function useDeleteMutation(baseOptions?: Apollo.MutationHookOptions<DeleteMutation, DeleteMutationVariables>) {\n        const options = {...defaultOptions, ...baseOptions}\n        return Apollo.useMutation<DeleteMutation, DeleteMutationVariables>(DeleteDocument, options);\n      }\n")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript"},"export function useGetProductQuery(baseOptions: Apollo.QueryHookOptions<GetProductQuery, GetProductQueryVariables>) {\n        const options = {...defaultOptions, ...baseOptions}\n        return Apollo.useQuery<GetProductQuery, GetProductQueryVariables>(GetProductDocument, options);\n      }\n")),Object(r.b)("p",null,"Now, you are ready to create your React TypeScript application using Hypi APIs!"),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"To use various Hypi APIs like CRUD, you will have to write the related graphql queries in ","*",".graphl files inside  ",Object(r.b)("inlineCode",{parentName:"p"},"src/graphql")," folder. Please check various APIs ",Object(r.b)("a",{parentName:"p",href:"https://docs.hypi.app/docs/api-references"},"here"),"."))),Object(r.b)("h3",{id:"using-graphql-hooks"},"Using GraphQL hooks"),Object(r.b)("p",null,"Inside src/components, add ",Object(r.b)("inlineCode",{parentName:"p"},"Product")," or your own data type component. Add ",Object(r.b)("inlineCode",{parentName:"p"},"ProductList.js")," / ",Object(r.b)("inlineCode",{parentName:"p"},"AddProduc.js")," / ",Object(r.b)("inlineCode",{parentName:"p"},"EditProduct.js"),"files. These files will access the graphql queries and mutations using the hooks."),Object(r.b)("p",null,"Let's try to understand the usage of hooks in the ProductList component."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"First, we import the hooks from graphql.ts file.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},"import\xa0{\xa0useUpsertMutation\xa0}\xa0from'../../generated/graphql'\nimport\xa0{\xa0useUpsertMutation,\xa0useGetProductQuery\xa0}\xa0from'../../generated/graphql'\nimport\xa0{\xa0useProductsQuery,\xa0useDeleteMutation\xa0}\xa0from'../../generated/graphql'\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Here, you may declare the GraphQL query hook and provide the ",Object(r.b)("a",{parentName:"li",href:"https://docs.hypi.app/docs/arcql"},"arcql statements")," under variables.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},"const { loading, error, data } = useProductsQuery({\n    variables: { arcql: '*' },\n});\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Declare the GraphQL mutation hook.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},"const\xa0[upsertMutation,\xa0{\xa0upsertData,\xa0upsertLoading,\xa0upsertError\xa0}]\xa0=\xa0useUpsertMutation()\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Declare Delete mutation hook.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},'const handleRemove = (event, id) => {\n    deleteMutation({\n      variables: {\n        arcql: "hypi.id = \'" + id + "\'"\n      }\n    })\n    window.location.reload();\n}\n')),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Declare Get Query hook.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},"  const { loading, error, data } = useGetProductQuery({\n    variables: { id: id },\n  });\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Retrieve the data from the ",Object(r.b)("inlineCode",{parentName:"li"},"Product")," data type. Delete the product on click event.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},'const productsOutput = data.find.edges.length === 0 ?\n    <div>\n      <p>No products found</p>\n    </div>\n    : data.find.edges.map((product, index) => {\n      return (\n        <div key={product.node.hypi.id}>\n          <li key={index} >\n            {product.node.title}\n          </li>\n          <button type="button" className={"btn"} onClick={(event) => handleRemove(event, product.node.hypi.id)}>\n            Remove\n          </button>\n          <Link\n            to={"/products/" + product.node.hypi.id}\n            className="badge badge-warning">\n            <button type="button" className={"btn"}>\n              Edit\n            </button>\n          </Link>\n        </div>\n      )\n    })\n')),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Insert data using the mutation. Data from the ",Object(r.b)("inlineCode",{parentName:"li"},"productForm")," gets inserted into the Product table.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},"const submitProductHandler = (event) => {\n    event.preventDefault()\n    //call the mutation to send data\n    upsertMutation({\n      variables: {\n        values: {\n          Product: {\n            hypi: {\n              id: productForm.id\n            },\n            title: productForm.title,\n            description: productForm.description\n          }\n        }\n      }\n    })\n    setRedirectToReferrer(true)\n  }\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Inside your main ",Object(r.b)("inlineCode",{parentName:"li"},"App.js")," file, you may access the ProductList.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},'<div className="container mt-3">\n        <Switch>\n          <Route exact path={["/", "/products"]} component={ProductList} />\n          <Route exact path="/add" component={AddProduct} />\n          <Route path="/products/:id" component={EditProduct} />\n        </Switch>\n      </div>\n')),Object(r.b)("h3",{id:"authentication-using-apollo-client"},"Authentication using Apollo Client"),Object(r.b)("p",null,"To make an HTTP connection to Hypi Endpoint, we use Apollo client. Following code demonstrates how to make this connection. Replace Hypi Authorization Token (Auth-Token) and hypi domain. This code has been added in the ",Object(r.b)("inlineCode",{parentName:"p"},"apollo-client.js")," file."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript"},"import {\n  ApolloClient,\n  InMemoryCache,\n  ApolloLink,\n  HttpLink,\n} from \"@apollo/client\";\n\nimport config from '../config'\n\nconst httpLink = new HttpLink({ uri: config.default_api_domain + \"/graphql\" });\n\nconst authMiddleware = () =>\n  new ApolloLink((operation, forward) => {\n    // add the authorization to the headers\n    const authToken = config.token\n    const domain = config.domain\n\n    operation.setContext({\n      headers: {\n        Authorization: `Bearer ${authToken}`,\n        'hypi-domain': `${domain}`\n      },\n    });\n    return forward(operation);\n  });\n\nexport const apolloClient = new ApolloClient({\n  link: authMiddleware().concat(httpLink),\n  cache: new InMemoryCache(),\n});\n")),Object(r.b)("p",null,"Run the application using ",Object(r.b)("inlineCode",{parentName:"p"},"npm run start")," command. To run the application ",Object(r.b)("inlineCode",{parentName:"p"},"react-scripts")," is needed.  You may check the setting in ",Object(r.b)("inlineCode",{parentName:"p"},"packag.json")," file. If the script is not installed, you may install it using ",Object(r.b)("inlineCode",{parentName:"p"},"npm install react-scripts --save")," command."),Object(r.b)("p",null,"This is the simplest way to use Hypi GraphQL queries and Mutations inside React TypeScript application!"))}s.isMDXComponent=!0},190:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=i.a.createContext({}),s=function(e){var t=i.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},u=function(e){var t=s(e.components);return i.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},b=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=s(n),b=a,h=u["".concat(o,".").concat(b)]||u[b]||d[b]||r;return n?i.a.createElement(h,p(p({ref:t},l),{},{components:n})):i.a.createElement(h,p({ref:t},l))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=b;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p.mdxType="string"==typeof e?e:a,o[1]=p;for(var l=2;l<r;l++)o[l]=n[l];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);