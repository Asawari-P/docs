(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{139:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return b}));var r=n(3),a=n(8),o=(n(0),n(183)),i={id:"create-serverless",title:"Create Serverless Function",sidebar_label:"Create Serverless Function",slug:"/create-serverless"},c={unversionedId:"create-serverless",id:"create-serverless",isDocsHomePage:!1,title:"Create Serverless Function",description:"The creation of serverless function is effortless!",source:"@site/content/create-serverless.md",slug:"/create-serverless",permalink:"/docs/create-serverless",editUrl:"https://github.com/hypi-universe/docs/edit/master/content/create-serverless.md",version:"current",sidebar_label:"Create Serverless Function",sidebar:"docs",previous:{title:"OpenWhisk CLI",permalink:"/docs/openwhisk-cli"},next:{title:"Use Serverless Function",permalink:"/docs/use-serverless"}},l=[],s={toc:l};function b(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"The creation of serverless function is effortless! "),Object(o.b)("p",null,"After installation of CLI, ",Object(o.b)("a",{parentName:"p",href:"/docs/openwhisk-cli"},"configure")," ",Object(o.b)("inlineCode",{parentName:"p"},"OpenWhisk")," to point towards Hypi's endpoint. Once it gets configured, you are ready to create a Serverless function."),Object(o.b)("p",null,"We will be using ",Object(o.b)("inlineCode",{parentName:"p"},"Javascript")," with NodeJS runtime to write our function. And then we will create its docker image on Openwhisk and invoke it to use with the Hypi platform."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"Let's follow the below steps to create ",Object(o.b)("inlineCode",{parentName:"p"},"Serverless Function")," ")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Create Java Script file action.js in a folder. Write  'Hello World' function in it.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},"function main(args) {\n    console.log('Hello World');\n    // throw new Error('It failed!');\n    return { hello: 'world', args: args };\n}\n")),Object(o.b)("ol",{start:2},Object(o.b)("li",{parentName:"ol"},"Create an action called ",Object(o.b)("inlineCode",{parentName:"li"},"hithere")," using action.js. ")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"wsk action create hithere action.js\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"ok: created action\n")),Object(o.b)("p",null,"The docker image of the javascript function 'Hello World' gets created by OpenWhisk. ",Object(o.b)("inlineCode",{parentName:"p"},"hithere")," gets listed on a namespace on the Hypi platform."),Object(o.b)("ol",{start:3},Object(o.b)("li",{parentName:"ol"},"Invoke an action ",Object(o.b)("inlineCode",{parentName:"li"},"hithere"),".  This is an activation of the serverless function. Now, your action is ready to use on Hypi platform as serverless function.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"wsk action invoke hithere --param x 1 --param y hi --result\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},'{\n    "args": {\n        "x": 1,\n        "y": "hi"\n    },\n    "hello": "world"\n}\n')),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"--param")," takes input parameters for the function. ",Object(o.b)("inlineCode",{parentName:"p"},"--result")," shows the result of the function."),Object(o.b)("ol",{start:4},Object(o.b)("li",{parentName:"ol"},"If you invoke the function without ",Object(o.b)("inlineCode",{parentName:"li"},"--result")," parameter, you will get the activation ",Object(o.b)("inlineCode",{parentName:"li"},"id")," of the action ",Object(o.b)("inlineCode",{parentName:"li"},"hithere"))),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"wsk action invoke hithere --param x 1 --param y hi\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"ok: invoked /_/hithere with id ee11ee981b984c1b91ee981b98cc1b48\n")),Object(o.b)("ol",{start:5},Object(o.b)("li",{parentName:"ol"},"You may get activation details of the action using the ",Object(o.b)("inlineCode",{parentName:"li"},"id")," received in the previous step.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"wsk activation get ee11ee981b984c1b91ee981b98cc1b48\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},'{\n    "namespace": "01F2GA50PHFK7BAE9FZTPSPBK3",\n    "name": "hithere",\n    "version": "0.0.1",\n    "subject": "01F2GA50PHFK7BAE9FZTPSPBK3",\n    "activationId": "ee11ee981b984c1b91ee981b98cc1b48",\n    "start": 1619068249600,\n    "end": 1619068249603,\n    "duration": 3,\n    "statusCode": 0,\n    "response": {\n        "status": "success",\n        "statusCode": 0,\n        "success": true,\n        "result": {\n            "args": {\n                "x": 1,\n                "y": "hi"\n            },\n            "hello": "world"\n        }\n    },\n    "logs": [\n        "2021-04-22T05:10:49.60266801Z  stdout: Hello World"\n    ],\n    "annotations": [\n        {\n            "key": "path",\n            "value": "01F2GA50PHFK7BAE9FZTPSPBK3/hithere"\n        },\n        {\n            "key": "waitTime",\n            "value": 90\n        },\n        {\n            "key": "kind",\n            "value": "nodejs:10"\n        },\n        {\n            "key": "timeout",\n            "value": false\n        },\n        {\n            "key": "limits",\n            "value": {\n                "concurrency": 1,\n                "logs": 10,\n                "memory": 256,\n                "timeout": 60000\n            }\n        }\n    ],\n    "publish": false\n}\n')),Object(o.b)("ol",{start:6},Object(o.b)("li",{parentName:"ol"},"You may retrieve the action list and namespace list with the following commands.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"wsk action list\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"actions\n/01F2GA50PHFK7BAE9FZTPSPBK3/hithere                                    private nodejs:10\n/01F2GA50PHFK7BAE9FZTPSPBK3/serverlessFun                              private nodejs:10\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"wsk namespace list\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"namespaces\n01F2GA50PHFK7BAE9FZTPSPBK3\n")),Object(o.b)("ol",{start:7},Object(o.b)("li",{parentName:"ol"},"Verify that the action was invoked by checking the activations list:")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"wsk activation list\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"Datetime Activation ID     Kind      Start Duration   Status  Entity\n2021-04-19 18:57:33 6955a0e828af40a195a0e828afe0a128 nodejs:10 cold  40ms       success 01F2GA50PH...TPSPBK3/hithere:0.0.1\n2021-04-19 16:34:31 26285233eaba4960a85233eaba4960aa nodejs:10 cold  36ms       success 01F2GA50PH...TPSPBK3/serverlessFun:0.0.1\n")))}b.isMDXComponent=!0},183:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),b=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=b(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=b(n),d=r,m=p["".concat(i,".").concat(d)]||p[d]||u[d]||o;return n?a.a.createElement(m,c(c({ref:t},s),{},{components:n})):a.a.createElement(m,c({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var s=2;s<o;s++)i[s]=n[s];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);